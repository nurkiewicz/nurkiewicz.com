<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Better Call Fallback - Designing resilient services</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/beige.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
    <style>
        img {
            background-color: rgb(238, 238, 238);
        }
    </style>
</head>

<body>
<div class="reveal">

    <div class="slides">

        <section>
            <h1>Better Call Fallback</h1>
            <h3>Designing resilient services</h3>
            <h4>Tomasz Nurkiewicz</h4>
            <p>
                <a href="https://nurkiewicz.com">nurkiewicz.com</a>,
                <a href="https://fosstodon.org/@nurkiewicz">@nurkiewicz@fosstodon.org</a>
            </p>
        </section>

        <section>
            <h1>You keep using that word <em>happy path</em></h1>
        </section>

        <section>
            <blockquote cite="https://en.wikiquote.org/wiki/Gerald_Weinberg">
                If builders built houses the way programmers built programs, the first woodpecker to come along would destroy civilization
            </blockquote>
            <small><a href="https://en.wikiquote.org/wiki/Gerald_Weinberg">Gerald Weinberg</a></small>
        </section>

        <section>
            <h1>One in a million</h1>
            <p class="fragment">...happens every 15 minutes at 1k RPS</p>
        </section>

        <section>
            <h1>P99 latency</h1>
            <p class="fragment">facebook.com makes 350 HTTP requests</p>
        </section>

        <section>
            <h1>How to...</h1>
            <ul>
                <li>...avoid</li>
                <li>...deal with</li>
                <li>...bypass</li>
            </ul>
            <h2>...failures</h2>
        </section>

        <section>
            <h1>Part I: RPC</h1>
        </section>

        <section>
            <h1><code>try-catch</code></h1>
        </section>

        <section>
            <ul style="list-style: square">
                <li>
                    Repay loan
                    <ul style="list-style: square">
                        <li>
                            Send bank transfer
                            <ul style="list-style: square">
                                <li>
                                    Update daily report
                                    <ul style="list-style: square">
                                        <li>
                                            Generate PDF
                                            <ul style="list-style: square">
                                                <li>
                                                    Send report over email
                                                    <ul style="list-style: square">
                                                        <li>
                                                            Wait for SMTP confirmation
                                                            <ul style="list-style: square" class="fragment">
                                                                <li>
                                                                    <del>
                                                                        <code>SocketException</code>
                                                                    </del>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                    </li>
                                </ul>
                            </li>
                        </li>
                    </ul>
                </li>
            </ul>
        </section>

        <section>
            <h1>Fallback</h1>
        </section>

        <section>
            <img src="resiliency/have-you-tried-turning-it-off-and-on-again.jpg" class="r-stretch"/>
        </section>

        <section>
            <h1>Exponential backoff</h1>
        </section>

        <section>
            <h1>Timeouts</h1>
        </section>

        <section>
            <h1 class="fragment">12 minutes!</h1>
            <pre>
                <code class="hljs language-plain" data-trim>
                    64 bytes from 216.58.212.14: icmp_seq=9720 ttl=114
                    time=749147.422 ms
                </code>
            </pre>
        </section>

        <section>
            <h1>Bulkheading</h1>
        </section>

        <section>
            <h1>Throttling</h1>
        </section>

        <section>
            <h1>Circuit Breaker</h1>
        </section>

        <section>
            <h1>To consider</h1>
            <ul>
                <li>What conditions open it?</li>
                <li>Does it ever close?</li>
                <li>Granularity?</li>
            </ul>
        </section>

        <section>
            <h1>Thundering herd problem</h1>
        </section>

        <section>
            <h1>Cache stampede</h1>
        </section>

        <section>
            <h1>Part II: Asynchrony</h1>
        </section>

        <section>
            <h1>You don't get a failure</h1>
            <h2>if you don't wait for the result</h2>
        </section>

        <section>
            <h1>Exceptions</h1>
            <p>Futures, promises async/await, streams</p>
        </section>

        <section>
            <h1>Thread pools</h1>
            <p>But also:</p>
            <ul>
                <li>Coroutines</li>
                <li>Virtual threads</li>
            </ul>
        </section>

        <section>
            <h1>Message queue</h1>
        </section>

        <section>
            <h1>DLQ</h1>
        </section>

        <section>
            <h1>At-least once</h1>
        </section>

        <section>
            <h1>Idempotency</h1>
        </section>

        <section>
            <h1>Outbox pattern</h1>
        </section>

        <section>
            <h1>Part III: distributed systems</h1>
        </section>

        <section>
            <h1>Leader election</h1>
        </section>

        <section>
            <h1>Local database</h1>
            <p>Think: asynchronous replication, local SQLite</p>
        </section>

        <section>
            <h1>Offline-first</h1>
        </section>

        <section>
            <h1>Failure backlog</h1>
        </section>

        <section>
            <h1>Gradual startup</h1>
        </section>

        <section>
            <h1>Liveness vs Readiness</h1>
        </section>

        <section>
            <h1>Part IV: Architecture</h1>
        </section>

        <section>
            <h1>Batching</h1>
        </section>

        <section>
            <h1>Dry run</h1>
            <p>aka. simulation</p>
        </section>

        <section>
            <h1>Compensating transaction</h1>
        </section>

        <section>
            <h1>Saga</h1>
        </section>

        <section>
            <h1>Throttling side effects</h1>
            <!-- https://mastodon.social/@nurkiewicz/109259595653594613 -->
        </section>

        <section>
            <h1>Killswitch</h1>
        </section>

        <section>
            <h1>Observability</h1>
            <p>Death by a thousand dashboards</p>
            <ul>
                <li>Metrics</li>
                <li>Logs</li>
                <li>Traces</li>
            </ul>
        </section>

        <section>
            <h1>Graceful degradation</h1>
        </section>

        <section>
            <h1>Testing resiliency</h1>
        </section>

        <section>
            <h1>Chaos engineering</h1>
        </section>

        <section>
            <h1>Feedback time!</h1>
            <img src="https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=https://feedback.boilingfrogs.pl/rate-lecture/1" class="r-stretch"/>
        </section>

        <section>
            <h1>Thank you!</h1>
            <img src="resiliency/qr.svg" class="r-stretch"/>
            <p>
                <small>
                    <a href="https://nurkiewicz.com/slides/resiliency">nurkiewicz.com/slides/resiliency</a>
                </small>
            </p>
        </section>

    </div>

</div>

<script src="dist/reveal.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    Reveal.initialize({
        hash: true,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealHighlight],
        width: 1800,
        margin: 0.08,
        transition: 'fade',
        progress: false,
        controls: false,
        center: true,
        slideNumber: 'c/t',
    });
</script>

</body>

</html>
