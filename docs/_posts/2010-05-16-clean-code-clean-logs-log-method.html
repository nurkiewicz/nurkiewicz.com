---
layout: post
title: 'Clean code, clean logs: log method arguments and return values (7/10)'
date: '2010-05-16T15:08:00.003+02:00'
author: Tomasz Nurkiewicz
tags:
- aop
- logging
modified_time: '2010-05-20T18:40:40.264+02:00'
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-3188058439906527877
blogger_orig_url: https://www.nurkiewicz.com/2010/05/clean-code-clean-logs-log-method.html
---

When you find a bug during development, you typically run a debugger trying to track down the potential cause*. Now imagine for a while you can’t use a debugger. For example, because the bug manifested itself on a customer environment few days ago and everything you have are logs. Would be able to find anything in them?<br /><br />If you follow the simple rule of logging each method input and output (arguments and return values), you don’t even need debugger any more. Of course, you must be reasonable but every method that: accesses external system (including database), blocks, waits, etc. should be considered. Simply follow this pattern:<br /><br /><pre class="brush: java">public String printDocument(Document doc, Mode mode) {<br />    log.debug("Entering printDocument(doc={}, mode={})", doc, mode);<br />    String id = //Lengthy printing operation<br />    log.debug("Leaving printDocument(): {}", id);<br />    return id;<br />}</pre><br /><br />Because you are logging both the beginning and the end of method invocation, you can manually discover inefficient code and even detect possible causes  of deadlocks and starvation – simply by looking after "<span style="font-style: italic;">entering</span>" without corresponding "<span style="font-style: italic;">leaving</span>". If your methods have meaningful names, reading logs would be a pleasure. Also analyzing what went wrong is much simpler as on each step you know exactly what has been processed. You can even use a simple AOP aspect to log a wide range of methods in your code. This reduces code duplication, but be careful, since it may lead to enormous amount of huge logs (<a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-do-you-know-what.html">do you know what you are logging?</a>)<br /><br />You should consider <span style="font-family: courier new;">DEBUG</span> or <span style="font-family: courier new;">TRACE </span>levels as best suited for these types of logs. And if you discover some method are called too often and logging might harm performance, simply decrease logging level for that class or remove the log completely (maybe leaving just one for the whole method invocation?) But it is always better to have too much rather than too few logging statements. Treat logging statements with same respect as unit tests – your code should be covered with logging routines as it is with unit tests. No part of the system should stay with no logs at all. Remember, sometimes observing logs rolling by is the only way to tell whether your application is working properly or hangs forever. <br /><br />* If you start by <a href="http://nurkiewicz.com/2009/12/adapter-pattern-revised.html">writing failing test</a> case exposing the bug, my  congratulations, I am proud of you!<br /><br /><br /><ul><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-use-appropriate.html">Clean code, clean logs: use appropriate tools (1/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-logging-levels.html">Clean code, clean logs: logging levels are there for you (2/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-do-you-know-what.html">Clean code, clean logs: do you know what you are logging? (3/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-avoid-side.html">Clean code, clean logs: avoid side effects (4/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-concise-and.html">Clean code, clean logs: concise and descriptive (5/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-tune-your-pattern.html">Clean code, clean logs: tune your pattern (6/10)</a></li><br /><li>Clean code, clean logs: log method arguments and return values (7/10)</li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-watch-out-for.html">Clean code, clean logs: watch out for external systems (8/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-log-exceptions.html">Clean code, clean logs: log exceptions properly (9/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-easy-to-read-easy.html">Clean code, clean logs: easy to read, easy to parse (10/10)</a></li><br /></ul>