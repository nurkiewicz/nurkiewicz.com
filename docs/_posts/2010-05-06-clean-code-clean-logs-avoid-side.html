---
layout: post
title: 'Clean code, clean logs: avoid side effects (4/10)'
date: '2010-05-06T20:17:00.004+02:00'
author: Tomasz Nurkiewicz
tags:
- logging
modified_time: '2010-05-20T18:38:07.720+02:00'
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-4046970041893650737
blogger_orig_url: https://www.nurkiewicz.com/2010/05/clean-code-clean-logs-avoid-side.html
---

Logging statements should have no or little impact on application behavior. Recently a friend of mine gave an example of a system that threw Hibernates' <span style="font-family:courier new;">LazyInitializationException </span>only on some particular environment. As you’ve probably guessed from the context, some logging statement caused lazy initialized collection to be loaded when session was attached. On this environment the logging levels were increased and collection was no longer initialized. Think how long would it take you to find a bug without knowing this context?<br /><br />Another side effect is slowing the application down. Quick answer: if you log too much or improperly use <span style="font-family:courier new;">toString()</span>/string concatenation, logging has a performance side effect. How big? Well, I have seen server restarting every 15 minutes because of a thread starvation caused by excessive logging. Now this is a side effect! From my experience, few hundreds of MiB is probably the upper limit of how much you can log onto disk per hour.<br /><br />Of course if logging statement itself fails and causes business process to terminate due to exception, this is also a huge side effect. I have seen such a construct to avoid this:<br /><br /><pre class="brush: java">try {<br />    log.trace("Id=" + request.getUser().getId() + " accesses " + manager.getPage().getUrl().toString())<br />} catch(NullPointerException e) {}</pre><br /><br />This is a real code, but please make the world a bit better place and don’t do it, ever. Anyway, I have already warned you about <a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-do-you-know-what.html">NPEs</a>.<br /><br /><br /><ul><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-use-appropriate.html">Clean code, clean logs: use appropriate tools (1/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-logging-levels.html">Clean code, clean logs: logging levels are there for you (2/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-do-you-know-what.html">Clean code, clean logs: do you know what you are logging? (3/10)</a></li><br /><li>Clean code, clean logs: avoid side effects (4/10)</li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-concise-and.html">Clean code, clean logs: concise and descriptive (5/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-tune-your-pattern.html">Clean code, clean logs: tune your pattern (6/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-log-method.html">Clean code, clean logs: log method arguments and return values (7/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-watch-out-for.html">Clean code, clean logs: watch out for external systems (8/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-log-exceptions.html">Clean code, clean logs: log exceptions properly (9/10)</a></li><br /><li><a href="http://nurkiewicz.com/2010/05/clean-code-clean-logs-easy-to-read-easy.html">Clean code, clean logs: easy to read, easy to parse (10/10)</a></li><br /></ul>