---
layout: post
title: 'Logback-feed: publish your application logs using Atom/RSS feed'
date: '2010-01-03T12:39:00.006+01:00'
author: Tomasz Nurkiewicz
tags:
- logging
- logback-feed
modified_time: '2010-01-03T13:03:49.296+01:00'
thumbnail: http://2.bp.blogspot.com/_P3ewsGQzHn0/S0CCn9CUHEI/AAAAAAAAASo/-jnag60Yokg/s72-c/firefox.png
blogger_id: tag:blogger.com,1999:blog-6753769565491687768.post-2542744773310045981
blogger_orig_url: https://www.nurkiewicz.com/2010/01/logback-feed-publish-your-application.html
---

I assume you are familiar with RSS/Atom protocol, probably you are even reading this post using <a href="http://nurkiewicz.blogspot.com/feeds/posts/default">feed</a> delivered by my blog. Atom and his older brother RSS are used to publish various materials (articles, posts) allowing users to monitor multiple web sites or blogs being up to date all the time. Can you see the advantages of this protocols arising when application logs come into play? Application might publish its own logs as Atom/RSS feed making them easily available for anyone with a web browser or feed reader.<br /><br />Of course granularity of the information is essential: system administrator could subscribe for tech-critical events, like application restarts or some major failures. On the other hand business administrators might like to monitor the overall health of business processes, asynchronous tasks, etc. And everything with nice-and-easy user interface (see screenshots below) instead of not very friendly log files reading.<br /><br />Publishing application logs using Atom or RSS protocol with Log4j is not actually a new idea (<a href="http://code.google.com/p/rssappender">[1]</a>, <a href="http://old.nabble.com/log4j-RSS-ATOM-Appender-td1725283.html">[2]</a>, <a href="http://www.jroller.com/laraDAB/entry/rss_atom_log4j_appender">[3]</a>). But this is not the reason why I chose <a href="http://logback.qos.ch/">Logback</a> rather than Log4j to base my library. Log-what? Haven’t you heard about Logback? It is the successor of Log4j (see dates in their <a href="http://logging.apache.org/log4j/1.2/changes-report.html">changes report</a>...), made by the same author. Logback has many benefits over Log4j, including improved performance and many new features. The good news is that migration from Log4j (or other logging frameworks) is painless and requires only some JAR replacements and configuration update (see <a href="http://ceki.blogspot.com/2006/12/migrate-from-log4j-to-logback-in.html">[4]</a> and <a href="http://logback.qos.ch/manual/migrationFromLog4j.html">[5]</a>). I really suggest you to upgrade (treat Logback as the new generation of Log4j), especially because Logback-feed requires this...<br /><br />So, once again, why Logback? When designing the library I came on a problem, how to communicate between appender (I thought custom appender was the only option) and feed servlet or standalone server. As it came out, the only possibility was to use shared memory, possibly hidden behind singleton anti-pattern (yes, I said it) and nasty static variables. So there were actually no possibilities at all. Especially when I realized that using memory is not only resource-consuming, but also would not survive server crash. And what is the point of having feed monitoring application crashes and restarts if all the logs before the restart are lost? That is how I came across <a href="http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html">JDBCAppender</a> in Log4j. Take a look at its <a href="http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html">API</a>, it is hard not to notice something... And since Logback IS the next Log4j "<span style="font-style: italic;">version</span>", it introduced decent replacement: <a href="http://logback.qos.ch/apidocs/ch/qos/logback/classic/db/DBAppender.html">DbAppender</a>. If you haven’t guessed already, both of this appenders store logging events in the database in some predefined tables. This might introduce big overhead, but logs will survive application restart.<br /><br />OK, coming back to logback-feed library, it can be found on GitHub:<br /><br /><a href="http://github.com/nurkiewicz/logback-feed">http://github.com/nurkiewicz/logback-feed</a><br /><br />If you want to see it in action, just download 0.0.1 release (available <a href="http://github.com/nurkiewicz/logback-feed/zipball/logback-feed-0.0.1">here</a>). After unpacking, type:<br /><br /><pre class="brush: plain">mvn install</pre><br /><br />browse to <span style="font-style: italic;">logback-feed-examples</span> module and run example web application:<br /><br /><pre class="brush: plain">mvn jetty:run</pre><br /><br />Then simply use this URL in your favorite feed reader/aggregator:<br /><br />http://localhost:8080/logback-feed-examples<br /><br />If even this is too much for you, at least take a look at these screenshots [*]:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_P3ewsGQzHn0/S0CCn9CUHEI/AAAAAAAAASo/-jnag60Yokg/s1600-h/firefox.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 200px; height: 121px;" src="http://2.bp.blogspot.com/_P3ewsGQzHn0/S0CCn9CUHEI/AAAAAAAAASo/-jnag60Yokg/s200/firefox.png" alt="" id="BLOGGER_PHOTO_ID_5422477574264855618" border="0" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_P3ewsGQzHn0/S0CCtCZSEeI/AAAAAAAAASw/qtWy96Sz-Kg/s1600-h/ie.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 200px; height: 121px;" src="http://1.bp.blogspot.com/_P3ewsGQzHn0/S0CCtCZSEeI/AAAAAAAAASw/qtWy96Sz-Kg/s200/ie.png" alt="" id="BLOGGER_PHOTO_ID_5422477661602714082" border="0" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_P3ewsGQzHn0/S0CCxtDL32I/AAAAAAAAAS4/t8Lr86fJorE/s1600-h/opera.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 200px; height: 121px;" src="http://4.bp.blogspot.com/_P3ewsGQzHn0/S0CCxtDL32I/AAAAAAAAAS4/t8Lr86fJorE/s200/opera.png" alt="" id="BLOGGER_PHOTO_ID_5422477741772234594" border="0" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_P3ewsGQzHn0/S0CC2dFKP_I/AAAAAAAAATA/KwoUp-5Le6s/s1600-h/thunderbird.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 200px; height: 121px;" src="http://2.bp.blogspot.com/_P3ewsGQzHn0/S0CC2dFKP_I/AAAAAAAAATA/KwoUp-5Le6s/s200/thunderbird.png" alt="" id="BLOGGER_PHOTO_ID_5422477823384895474" border="0" /></a><br />Wouldn’t your boss or client be delighted? Seeing most critical application logs (especially prepared, filtered and formatted) alongside her/his e-mails or opened web pages? Opera web browser even displays pop-up window when new entries (logs) are found! And of course any Atom/RSS capable reader would work as well (except Google Reader, unless you make your application logs feed accessible publicly on the Internet...)<br /><br />Other features of Logback-feed:<br /><ul><li>Both title and content of each log entry is customizable, so you can control what information is published. <a href="http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout">PatternLayout</a> syntax is used. You can see default (HTML table) on screenshots.</li><li>Each entry can have customizable URL. This is typically used to point the original article or blog post, but you can use this URL to display exact .log file path (for instance on FTP or SMB server). See <span style="font-style: italic;">com.blogspot.nurkiewicz.logback.feed.config.EntryLinkGenerator</span> interface.</li><li>Easy Spring integration with Spring MVC <span style="font-style: italic;">com.blogspot.nurkiewicz.logback.feed. LogbackFeedController</span>.</li></ul><br />Before you start using Logback-feed, you must first migrate your project to Logback (if you haven’t done it already, see links above) and <a href="http://logback.qos.ch/manual/appenders.html#DBAppender">configure</a> DbAppender. But as I said, your most important task is to choose which logs to publish. Publishing all logs is extremely bad idea, as it will slow down your application and make your feed reader go crazy. You should carefully pick only most essential logs and send them to DbAppender. This can be done on logger level:<br /><br /><pre class="brush: xml">&lt;logger name="com.example.VeryImportantJob" level="INFO"&gt;<br />   &lt;appender-ref ref="DB_APPENDER"/&gt;<br />&lt;/logger&gt;</pre><br /><br />or on appender level:<br /><br /><pre class="brush: xml">&lt;appender name="DB_APPENDER " class="ch.qos.logback.classic.db.DBAppender"&gt;<br />   &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;<br />       &lt;level&gt;WARN&lt;/level&gt;<br />   &lt;/filter&gt;<br />   &lt;connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource"&gt;<br />       &lt;!-- --&gt;<br />   &lt;/connectionSource&gt;<br />&lt;/appender&gt;</pre><br /><br />Hope you are encouraged enough to try my tiny library. Merciless time does not allow me to work on this project as much as possible, but if you find it useful, please let me now! Take a look at project site, there are few issues opened, feel free to add more if something does not work properly. And of course, it’s open source, feel free to contribute!<br /><br /><span style="font-style: italic;">[*]</span> I am very sorry for Polish labels in Internet Explorer screenshot. Polish Is my native language and I am currently working on Polish Windows OS. Changing language in Opera was trivial, Mozilla Firefox and Thunderbird need some hacky <a href="http://kb.mozillazine.org/Change_Default_Mozilla_Language">tricks</a>, but apparently to change IE language you should buy another copy of Windows – and preferably a new computer... But I must admit, IE 8 has very nice feed reader, the only one showing categories (allows to filter logs by level or logger – or tags on my blog). BTW I would be delighted to see other screenshots in different readers and/or of different applications. If you have any, please send them to me!